-- Добавление всех распространенных кодов ошибок BMW

-- OBD2 коды (P-коды)
INSERT INTO error_codes (code, title, description, severity, common_causes, symptoms, solutions, related_systems, category) VALUES

-- P01xx - Топливная система и воздух
('P0100', 'Неисправность датчика массового расхода воздуха', 'Сбой в цепи датчика MAF/ДМРВ', 'warning',
 ARRAY['Загрязнение датчика', 'Повреждение проводки', 'Неисправность датчика'],
 ARRAY['Нестабильный холостой ход', 'Потеря мощности', 'Повышенный расход'],
 ARRAY['Очистка датчика MAF', 'Проверка проводки', 'Замена датчика'],
 ARRAY['engine', 'sensors'], 'obd2'),

('P0170', 'Нарушение топливной коррекции', 'Система не может правильно корректировать смесь', 'warning',
 ARRAY['Утечки воздуха', 'Проблемы с топливной системой', 'Неисправные датчики'],
 ARRAY['Плавающие обороты', 'Повышенный расход', 'Потеря мощности'],
 ARRAY['Проверка на утечки', 'Диагностика датчиков O2', 'Проверка форсунок'],
 ARRAY['engine', 'fuel_system'], 'obd2'),

('P0172', 'Слишком богатая смесь (Bank 1)', 'Избыток топлива в смеси', 'warning',
 ARRAY['Неисправные форсунки', 'Высокое давление топлива', 'Загрязнённый воздушный фильтр', 'Неисправность датчика O2'],
 ARRAY['Чёрный дым из выхлопа', 'Повышенный расход', 'Запах бензина', 'Плохая динамика'],
 ARRAY['Проверка форсунок', 'Диагностика давления топлива', 'Замена воздушного фильтра'],
 ARRAY['engine', 'fuel_system'], 'obd2'),

('P0174', 'Слишком бедная смесь (Bank 2)', 'Недостаток топлива во втором ряду цилиндров', 'warning',
 ARRAY['Утечка воздуха', 'Слабый топливный насос', 'Засорённые форсунки'],
 ARRAY['Потеря мощности', 'Плавающие обороты', 'Затруднённый запуск'],
 ARRAY['Проверка впускной системы', 'Диагностика топливного насоса', 'Очистка форсунок'],
 ARRAY['engine', 'fuel_system'], 'obd2'),

('P0175', 'Слишком богатая смесь (Bank 2)', 'Избыток топлива во втором ряду', 'warning',
 ARRAY['Неисправные форсунки', 'Проблемы с регулятором давления', 'Загрязнённый воздушный фильтр'],
 ARRAY['Чёрный дым', 'Повышенный расход', 'Потеря динамики'],
 ARRAY['Диагностика форсунок', 'Проверка давления топлива', 'Замена фильтра'],
 ARRAY['engine', 'fuel_system'], 'obd2'),

-- P02xx - Форсунки
('P0201', 'Обрыв цепи форсунки цилиндра 1', 'Проблема с форсункой первого цилиндра', 'critical',
 ARRAY['Неисправность форсунки', 'Обрыв проводки', 'Проблема с ЭБУ'],
 ARRAY['Троение двигателя', 'Потеря мощности', 'Неровная работа'],
 ARRAY['Проверка форсунки и проводки', 'Замена форсунки', 'Диагностика ЭБУ'],
 ARRAY['engine', 'fuel_system'], 'obd2'),

('P0202', 'Обрыв цепи форсунки цилиндра 2', 'Проблема с форсункой второго цилиндра', 'critical',
 ARRAY['Неисправность форсунки', 'Повреждение проводки'],
 ARRAY['Троение', 'Потеря мощности'],
 ARRAY['Проверка и замена форсунки'],
 ARRAY['engine', 'fuel_system'], 'obd2'),

('P0203', 'Обрыв цепи форсунки цилиндра 3', 'Проблема с форсункой третьего цилиндра', 'critical',
 ARRAY['Неисправность форсунки', 'Повреждение проводки'],
 ARRAY['Троение', 'Потеря мощности'],
 ARRAY['Проверка и замена форсунки'],
 ARRAY['engine', 'fuel_system'], 'obd2'),

('P0204', 'Обрыв цепи форсунки цилиндра 4', 'Проблема с форсункой четвёртого цилиндра', 'critical',
 ARRAY['Неисправность форсунки', 'Повреждение проводки'],
 ARRAY['Троение', 'Потеря мощности'],
 ARRAY['Проверка и замена форсунки'],
 ARRAY['engine', 'fuel_system'], 'obd2'),

('P0205', 'Обрыв цепи форсунки цилиндра 5', 'Проблема с форсункой пятого цилиндра', 'critical',
 ARRAY['Неисправность форсунки', 'Повреждение проводки'],
 ARRAY['Троение', 'Потеря мощности'],
 ARRAY['Проверка и замена форсунки'],
 ARRAY['engine', 'fuel_system'], 'obd2'),

('P0206', 'Обрыв цепи форсунки цилиндра 6', 'Проблема с форсункой шестого цилиндра', 'critical',
 ARRAY['Неисправность форсунки', 'Повреждение проводки'],
 ARRAY['Троение', 'Потеря мощности'],
 ARRAY['Проверка и замена форсунки'],
 ARRAY['engine', 'fuel_system'], 'obd2'),

-- P03xx - Система зажигания и пропуски
('P0301', 'Пропуски зажигания в цилиндре 1', 'Обнаружены пропуски в первом цилиндре', 'critical',
 ARRAY['Изношенные свечи', 'Неисправная катушка', 'Низкая компрессия', 'Проблемы с форсункой'],
 ARRAY['Троение', 'Вибрация', 'Потеря мощности'],
 ARRAY['Замена свечи', 'Проверка катушки', 'Измерение компрессии'],
 ARRAY['engine', 'ignition'], 'obd2'),

('P0302', 'Пропуски зажигания в цилиндре 2', 'Обнаружены пропуски во втором цилиндре', 'critical',
 ARRAY['Изношенные свечи', 'Неисправная катушка', 'Низкая компрессия'],
 ARRAY['Троение', 'Вибрация', 'Потеря мощности'],
 ARRAY['Замена свечи', 'Проверка катушки'],
 ARRAY['engine', 'ignition'], 'obd2'),

('P0303', 'Пропуски зажигания в цилиндре 3', 'Обнаружены пропуски в третьем цилиндре', 'critical',
 ARRAY['Изношенные свечи', 'Неисправная катушка', 'Низкая компрессия'],
 ARRAY['Троение', 'Вибрация', 'Потеря мощности'],
 ARRAY['Замена свечи', 'Проверка катушки'],
 ARRAY['engine', 'ignition'], 'obd2'),

('P0304', 'Пропуски зажигания в цилиндре 4', 'Обнаружены пропуски в четвёртом цилиндре', 'critical',
 ARRAY['Изношенные свечи', 'Неисправная катушка', 'Низкая компрессия'],
 ARRAY['Троение', 'Вибрация', 'Потеря мощности'],
 ARRAY['Замена свечи', 'Проверка катушки'],
 ARRAY['engine', 'ignition'], 'obd2'),

('P0305', 'Пропуски зажигания в цилиндре 5', 'Обнаружены пропуски в пятом цилиндре', 'critical',
 ARRAY['Изношенные свечи', 'Неисправная катушка', 'Низкая компрессия'],
 ARRAY['Троение', 'Вибрация', 'Потеря мощности'],
 ARRAY['Замена свечи', 'Проверка катушки'],
 ARRAY['engine', 'ignition'], 'obd2'),

('P0306', 'Пропуски зажигания в цилиндре 6', 'Обнаружены пропуски в шестом цилиндре', 'critical',
 ARRAY['Изношенные свечи', 'Неисправная катушка', 'Низкая компрессия'],
 ARRAY['Троение', 'Вибрация', 'Потеря мощности'],
 ARRAY['Замена свечи', 'Проверка катушки'],
 ARRAY['engine', 'ignition'], 'obd2'),

('P0335', 'Неисправность датчика положения коленвала', 'Ошибка датчика CKP', 'critical',
 ARRAY['Неисправность датчика', 'Повреждение проводки', 'Загрязнение датчика'],
 ARRAY['Не заводится', 'Внезапная остановка', 'Рывки'],
 ARRAY['Проверка датчика', 'Очистка', 'Замена датчика'],
 ARRAY['engine', 'sensors'], 'obd2'),

('P0340', 'Неисправность датчика положения распредвала', 'Ошибка датчика CMP', 'critical',
 ARRAY['Неисправность датчика', 'Проблемы с проводкой', 'Износ распредвала'],
 ARRAY['Затруднённый запуск', 'Потеря мощности', 'Неровная работа'],
 ARRAY['Проверка датчика', 'Диагностика проводки', 'Замена датчика'],
 ARRAY['engine', 'sensors'], 'obd2'),

-- P04xx - Система рециркуляции и выхлоп
('P0400', 'Неисправность системы EGR', 'Проблема с клапаном рециркуляции отработавших газов', 'warning',
 ARRAY['Засорение клапана EGR', 'Неисправность клапана', 'Утечка вакуума'],
 ARRAY['Потеря мощности', 'Детонация', 'Повышенный расход'],
 ARRAY['Очистка клапана EGR', 'Проверка вакуумных линий', 'Замена клапана'],
 ARRAY['exhaust_system'], 'obd2'),

('P0401', 'Недостаточный поток EGR', 'Система EGR пропускает недостаточно газов', 'warning',
 ARRAY['Засорение каналов EGR', 'Неисправность клапана', 'Утечка'],
 ARRAY['Детонация', 'Повышенные выбросы NOx'],
 ARRAY['Очистка системы EGR', 'Проверка клапана'],
 ARRAY['exhaust_system'], 'obd2'),

('P0402', 'Избыточный поток EGR', 'Система EGR пропускает слишком много газов', 'warning',
 ARRAY['Заклинивший клапан', 'Неисправность управления'],
 ARRAY['Потеря мощности', 'Нестабильный холостой ход'],
 ARRAY['Проверка клапана EGR', 'Диагностика управления'],
 ARRAY['exhaust_system'], 'obd2'),

('P0410', 'Неисправность системы вторичного воздуха', 'Ошибка системы подачи воздуха в выхлоп', 'warning',
 ARRAY['Неисправность насоса', 'Засорение клапанов', 'Утечки в системе'],
 ARRAY['Горит Check Engine', 'Повышенные выбросы при холодном пуске'],
 ARRAY['Проверка насоса вторичного воздуха', 'Диагностика клапанов', 'Поиск утечек'],
 ARRAY['exhaust_system'], 'obd2'),

('P0421', 'Низкая эффективность катализатора (Bank 1)', 'Катализатор первого ряда работает неэффективно', 'warning',
 ARRAY['Износ катализатора', 'Повреждение керамики', 'Неисправность датчиков O2'],
 ARRAY['Горит Check Engine', 'Снижение динамики'],
 ARRAY['Диагностика датчиков O2', 'Проверка катализатора'],
 ARRAY['exhaust_system'], 'obd2'),

('P0430', 'Низкая эффективность катализатора (Bank 2)', 'Катализатор второго ряда работает неэффективно', 'warning',
 ARRAY['Износ катализатора', 'Повреждение', 'Проблемы с датчиками'],
 ARRAY['Горит Check Engine', 'Потеря динамики'],
 ARRAY['Диагностика и замена катализатора'],
 ARRAY['exhaust_system'], 'obd2'),

-- P05xx - Холостой ход и скорость
('P0500', 'Неисправность датчика скорости автомобиля', 'Нет сигнала от VSS', 'warning',
 ARRAY['Неисправность датчика', 'Обрыв проводки', 'Проблемы с АБС'],
 ARRAY['Не работает спидометр', 'Неправильная работа АКПП', 'Не работает круиз-контроль'],
 ARRAY['Проверка датчика скорости', 'Диагностика проводки', 'Проверка ABS'],
 ARRAY['sensors', 'transmission'], 'obd2'),

('P0505', 'Неисправность системы управления холостым ходом', 'Ошибка регулятора холостого хода', 'warning',
 ARRAY['Загрязнение дроссельной заслонки', 'Неисправность клапана IAC', 'Утечки воздуха'],
 ARRAY['Плавающие обороты', 'Глохнет на холостом ходу', 'Высокие обороты'],
 ARRAY['Очистка дроссельной заслонки', 'Проверка клапана холостого хода', 'Поиск утечек'],
 ARRAY['engine'], 'obd2'),

-- P06xx - ЭБУ и электроника
('P0600', 'Ошибка связи с ЭБУ', 'Проблема с шиной CAN или памятью ЭБУ', 'critical',
 ARRAY['Низкое напряжение АКБ', 'Проблемы с ЭБУ', 'Коррозия контактов'],
 ARRAY['Неустойчивая работа', 'Аварийный режим', 'Отказ систем'],
 ARRAY['Проверка АКБ и генератора', 'Диагностика ЭБУ', 'Очистка контактов'],
 ARRAY['electronics'], 'obd2'),

('P0606', 'Ошибка процессора ЭБУ', 'Внутренний сбой блока управления', 'critical',
 ARRAY['Сбой ПО', 'Перегрев ЭБУ', 'Неисправность процессора'],
 ARRAY['Аварийный режим', 'Не заводится', 'Нестабильная работа'],
 ARRAY['Перезагрузка ЭБУ', 'Обновление ПО', 'Замена ЭБУ'],
 ARRAY['electronics'], 'obd2'),

-- P07xx - Трансмиссия
('P0700', 'Неисправность системы управления АКПП', 'Общая ошибка коробки передач', 'critical',
 ARRAY['Низкий уровень масла', 'Неисправность соленоидов', 'Проблемы с ЭБУ АКПП'],
 ARRAY['Рывки при переключении', 'АКПП в аварийном режиме', 'Не переключаются передачи'],
 ARRAY['Проверка уровня масла АКПП', 'Диагностика соленоидов', 'Компьютерная диагностика'],
 ARRAY['transmission'], 'obd2'),

('P0715', 'Неисправность датчика оборотов входного вала АКПП', 'Нет сигнала от датчика скорости турбины', 'warning',
 ARRAY['Неисправность датчика', 'Повреждение проводки', 'Проблемы с разъёмом'],
 ARRAY['Рывки', 'Неправильное переключение', 'Аварийный режим'],
 ARRAY['Проверка датчика и проводки', 'Замена датчика'],
 ARRAY['transmission'], 'obd2'),

('P0720', 'Неисправность датчика оборотов выходного вала АКПП', 'Ошибка датчика OSS', 'warning',
 ARRAY['Неисправность датчика', 'Обрыв провода', 'Загрязнение датчика'],
 ARRAY['Неправильная работа спидометра', 'Рывки АКПП', 'Блокировка передач'],
 ARRAY['Диагностика датчика', 'Проверка проводки', 'Замена датчика'],
 ARRAY['transmission'], 'obd2'),

('P0730', 'Неправильное передаточное отношение АКПП', 'Проскальзывание или неверная передача', 'critical',
 ARRAY['Износ фрикционов', 'Низкий уровень масла', 'Неисправность гидроблока'],
 ARRAY['Пробуксовка', 'Рывки', 'Аварийный режим'],
 ARRAY['Проверка уровня и качества масла', 'Диагностика АКПП', 'Ремонт коробки'],
 ARRAY['transmission'], 'obd2'),

-- BMW-специфичные коды
('120308', 'Ошибка давления наддува', 'Фактическое давление наддува отклоняется от заданного', 'warning',
 ARRAY['Утечка воздуха', 'Неисправность турбины', 'Проблемы с клапаном управления'],
 ARRAY['Потеря мощности', 'Свист при ускорении', 'Увеличенный расход'],
 ARRAY['Проверка системы наддува', 'Диагностика турбины', 'Проверка интеркулера'],
 ARRAY['engine', 'turbo'], 'bmw_specific'),

('2E82', 'Ошибка системы Valvetronic', 'Проблема с системой бесступенчатого подъёма клапанов', 'critical',
 ARRAY['Износ привода Valvetronic', 'Загрязнение механизма', 'Неисправность датчиков'],
 ARRAY['Потеря мощности', 'Неровный холостой ход', 'Аварийный режим'],
 ARRAY['Очистка системы Valvetronic', 'Калибровка', 'Замена привода'],
 ARRAY['engine'], 'bmw_specific'),

('2E84', 'Ошибка адаптации Valvetronic', 'Система не может адаптироваться', 'critical',
 ARRAY['Загрязнение', 'Износ механизма', 'Проблемы с датчиками'],
 ARRAY['Аварийный режим', 'Потеря мощности'],
 ARRAY['Очистка и калибровка Valvetronic'],
 ARRAY['engine'], 'bmw_specific'),

('2E87', 'Обучение Valvetronic не выполнено', 'Требуется инициализация системы', 'warning',
 ARRAY['После замены аккумулятора', 'После ремонта двигателя', 'Сброс адаптаций'],
 ARRAY['Неровная работа', 'Потеря мощности'],
 ARRAY['Выполнить обучение через диагностическое оборудование'],
 ARRAY['engine'], 'bmw_specific'),

('29D2', 'Неисправность давления топлива', 'Давление топлива вне допустимого диапазона', 'critical',
 ARRAY['Неисправность ТНВД', 'Проблемы с регулятором', 'Утечка в системе'],
 ARRAY['Потеря мощности', 'Затруднённый запуск', 'Аварийный режим'],
 ARRAY['Проверка ТНВД', 'Диагностика регулятора давления', 'Поиск утечек'],
 ARRAY['fuel_system'], 'bmw_specific'),

('29E1', 'Неисправность клапана регулировки давления топлива', 'Ошибка DRV (регулятора давления)', 'warning',
 ARRAY['Засорение клапана', 'Неисправность клапана', 'Проблемы с проводкой'],
 ARRAY['Неровная работа', 'Затруднённый запуск', 'Потеря мощности'],
 ARRAY['Очистка клапана', 'Проверка проводки', 'Замена клапана'],
 ARRAY['fuel_system'], 'bmw_specific'),

('4102', 'Неисправность системы охлаждения', 'Перегрев или недостаточная температура', 'critical',
 ARRAY['Неисправность термостата', 'Проблемы с помпой', 'Утечка ОЖ'],
 ARRAY['Перегрев', 'Недогрев', 'Плохая работа печки'],
 ARRAY['Проверка термостата', 'Диагностика помпы', 'Поиск утечек'],
 ARRAY['cooling_system'], 'bmw_specific'),

('5E00', 'Ошибка системы Start/Stop', 'Неисправность системы автоматического отключения двигателя', 'info',
 ARRAY['Низкий заряд АКБ', 'Неисправность датчиков', 'Климат требует работы двигателя'],
 ARRAY['Не работает функция Start/Stop', 'Сообщение на приборной панели'],
 ARRAY['Проверка АКБ', 'Диагностика системы', 'Проверка датчиков'],
 ARRAY['electronics'], 'bmw_specific'),

('5DDE', 'Ошибка управления дроссельной заслонкой', 'Проблема с электронной педалью газа', 'critical',
 ARRAY['Неисправность привода дросселя', 'Загрязнение', 'Проблемы с датчиками'],
 ARRAY['Аварийный режим', 'Ограничение мощности', 'Нет реакции на педаль'],
 ARRAY['Очистка дроссельной заслонки', 'Калибровка', 'Замена привода'],
 ARRAY['engine'], 'bmw_specific'),

('CD53', 'Ошибка системы ABS/DSC', 'Неисправность антиблокировочной системы', 'warning',
 ARRAY['Неисправность датчика колеса', 'Проблемы с проводкой', 'Неисправность блока ABS'],
 ARRAY['Горит лампа ABS', 'Не работает DSC', 'Сообщение на дисплее'],
 ARRAY['Проверка датчиков колёс', 'Диагностика проводки', 'Проверка блока ABS'],
 ARRAY['abs', 'safety'], 'bmw_specific'),

('9C4E', 'Ошибка SAS (датчика угла поворота руля)', 'Требуется калибровка датчика', 'warning',
 ARRAY['После замены АКБ', 'После развал-схождения', 'Сбой калибровки'],
 ARRAY['Горит лампа DSC', 'Не работает Lane Assist', 'Сообщение на дисплее'],
 ARRAY['Калибровка через диагностическое оборудование'],
 ARRAY['sensors', 'safety'], 'bmw_specific'),

('A1CD', 'Неисправность подушек безопасности', 'Ошибка системы SRS Airbag', 'critical',
 ARRAY['Неисправность датчиков', 'Проблемы с проводкой', 'Неисправный модуль'],
 ARRAY['Горит лампа Airbag', 'Подушки не сработают при ДТП'],
 ARRAY['Диагностика системы SRS', 'Проверка датчиков удара', 'Ремонт проводки'],
 ARRAY['safety'], 'bmw_specific'),

('C1A4', 'Ошибка адаптивной подвески', 'Неисправность системы Dynamic Drive/EDC', 'warning',
 ARRAY['Утечка в пневмосистеме', 'Неисправность компрессора', 'Проблемы с датчиками'],
 ARRAY['Жёсткая подвеска', 'Крены в поворотах', 'Сообщение на дисплее'],
 ARRAY['Проверка пневмосистемы', 'Диагностика компрессора', 'Проверка стоек'],
 ARRAY['suspension'], 'bmw_specific');
